!function(a){"use strict";window.namespace=function(b,c){for(var d,e=window,f=b.split(".");d=f.shift();)e[d]=e[d]||{},e=e[d];a.extend(e,c)}}(window._),function(){namespace("Pictures"),Pictures.API=function(){function a(){}return a.search=function(a,b){var c,d;return c=this.key,d=new Flickr({api_key:c}),d.photos.search({text:a,per_page:6,extras:"url_n"},function(a,c){if(a)throw new Error(a);return b(c.photos.photo)})},a}()}.call(this),function(){namespace("Pictures"),Pictures.Controller=function(){function a(){}return a.loadImages=function(a){return Pictures.API.search(a,Pictures.View.addImages)},a.setupWidgetIn=function(a,b){return Pictures.API.key=b,Pictures.View.appendFormTo(a),this.bind()},a.bind=function(){return $("[data-id=pictures-button]").click(function(a){return function(){return a.processInput(Pictures.View.getInput())}}(this))},a.processInput=function(a){return this.isValidInput(a)?this.loadImages(a):this.showInvalidInput()},a.isValidInput=function(a){return this.isNotEmpty(a)&&this.hasOnlyValidCharacters(a)},a.isNotEmpty=function(a){return 0!==a.length},a.hasOnlyValidCharacters=function(a){return!a.match(/[^\w\s]/)},a.showInvalidInput=function(){},a}()}.call(this),function(){namespace("Pictures"),Pictures.Template=function(){function a(){}return a.renderImagesHtml=function(a){return _.template('<div data-id="images" id="flickr-images">\n  <% for(var i = 0; i < images.length; i++){ %>\n    <img src="<%= images[i].url_n %>" alt="<%= images[i].title %>">\n  <% } %>\n</div>',{images:a})},a.renderForm=function(){return _.template('<input name="pictures-search" type="text"><br>\n<button id="pictures" data-id="pictures-button">Get pictures</button><br>\n<div data-id="pictures-output"></div>')},a}()}.call(this),function(){namespace("Pictures"),Pictures.View=function(){function a(){}return a.getInput=function(){return $("[name=pictures-search]").val()},a.addImages=function(a){var b;return b=Pictures.Template.renderImagesHtml(a),$("[data-id=pictures-output]").html(b)},a.appendFormTo=function(a){var b;return b=Pictures.Template.renderForm(),$(a).html(b)},a}()}.call(this);